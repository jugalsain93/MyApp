import{a as q,b as J}from"./chunk-3D4FXXWE.js";import{a as Y}from"./chunk-F2CZZAQT.js";import{a as P}from"./chunk-MCTHUXQ3.js";import{a as R,c as W,d as O,e as A,f as G,g as N,k as U,l as B,m as k,o as z}from"./chunk-IVHO64GE.js";import"./chunk-YLB4LM2T.js";import{c as V,d as x,f as L,n as T}from"./chunk-UTQS25EZ.js";import{$a as F,Aa as C,Fa as v,Pa as m,Qa as e,Ra as t,Sa as M,Va as D,Wa as w,X as g,Xa as I,Y as p,bb as o,cb as _,fb as u,gb as h,hb as b,mb as E,p as f,ra as l,tb as j,wa as S,xb as H}from"./chunk-LAEVRNZJ.js";function K(d,a){if(d&1&&(e(0,"option",6),o(1),t()),d&2){let r=a.$implicit;m("value",r.id),l(),_(r.name)}}function Q(d,a){if(d&1&&(e(0,"option",6),o(1),t()),d&2){let r=a.$implicit;m("value",r.id),l(),_(r.name)}}function X(d,a){if(d&1&&(e(0,"option",6),o(1),t()),d&2){let r=a.$implicit;m("value",r.name),l(),_(r.name)}}function Z(d,a){if(d&1&&(e(0,"option",6),o(1),t()),d&2){let r=a.$implicit;m("value",r.id),l(),_(r.name)}}function $(d,a){if(d&1&&(e(0,"div",33)(1,"div",34),o(2),t(),e(3,"div",35),o(4),t()()),d&2){let r=a.$implicit;l(2),_(r.name),l(2),_(r.id)}}function ee(d,a){if(d&1&&(e(0,"div",31),v(1,$,5,2,"div",32),t()),d&2){let r=I();l(),m("ngForOf",r.dashboardItems)}}function te(d,a){d&1&&(e(0,"div",36),o(1,"No dashboard data available."),t())}var y=class d{constructor(a,r,i,s,c,n){this.commonService=a;this.router=r;this.dashboardService=i;this.userService=s;this.loadingService=c;this.cdr=n}dashboardItems=[];regionList=[];countryList=[];genderList=[];ageGroupList=[];objUser={};objFilter={regionId:0,countryId:0,membershipStatus:"A",membershipType:"",gender:"",ageGroupId:0,fromDate:"",toDate:""};async ngOnInit(){await this.initFilters(),this.loadingService.setFullPageLoading(!1),this.loadingService.setContentLoading(!1)}async initFilters(){this.objUser=await f(this.userService.getUserProfile()),this.objFilter.regionId=this.objUser.regionId,this.objFilter.countryId=this.objUser.countryId,this.regionList=await f(this.commonService.getRegions()),this.countryList=await f(this.commonService.getCountries(this.objUser.regionId)),this.genderList=await f(this.commonService.getGenders()),this.ageGroupList=await f(this.commonService.getAgeGroups()),this.onSearch()}async onSearch(){debugger;let a=this.objFilter,r=`${a.regionId},${a.countryId},${a.membershipStatus},${a.membershipType},${a.ageGroupId},${a.gender},${a.fromDate||0},${a.toDate||0}`;this.dashboardItems=await f(this.dashboardService.getDashboardData(r)),this.cdr.detectChanges()}onRegionChange(a){let r=+a.target.value;this.objFilter.regionId=r,this.commonService.getCountries(r).subscribe(i=>{this.countryList=i??[],this.objFilter.countryId=0})}static \u0275fac=function(r){return new(r||d)(S(Y),S(T),S(q),S(J),S(H),S(j))};static \u0275cmp=C({type:d,selectors:[["app-dashboard-home"]],decls:74,vars:17,consts:[["noData",""],[1,"container","mt-3"],[3,"ngSubmit"],[1,"row","mb-3"],[1,"col-md-3"],["name","regionId",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["name","countryId",1,"form-control",3,"ngModelChange","ngModel"],["name","membershipStatus",1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","P"],["value","A"],["name","membershipType",1,"form-control",3,"ngModelChange","ngModel"],["value","BlockRadiance"],["value","Event"],["value","HealthRadar"],["value","Volunteer"],["value","Recycling"],["value","BlockRadiance-Sustainability"],["name","gender",1,"form-control",3,"ngModelChange","ngModel"],["name","ageGroupId",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],[1,"d-flex"],["name","fromDate","type","date",1,"form-control","me-1",3,"ngModelChange","ngModel"],[1,"mx-1"],["name","toDate","type","date",1,"form-control","me-1",3,"ngModelChange","ngModel"],[1,"col-md-2","d-flex","justify-content-end","align-items-end"],["type","submit",1,"btn","btn-primary","w-90"],[1,"clearfix"],["class","dashboard-grid",4,"ngIf","ngIfElse"],[1,"dashboard-grid"],["class","dashboard-card",4,"ngFor","ngForOf"],[1,"dashboard-card"],[1,"card-title"],[1,"card-value"],[1,"no-data-message"]],template:function(r,i){if(r&1){let s=D();e(0,"div",1)(1,"form",2),w("ngSubmit",function(){return g(s),p(i.onSearch())}),e(2,"div",3)(3,"div",4)(4,"label"),o(5,"Region"),t(),e(6,"select",5),b("ngModelChange",function(n){return g(s),h(i.objFilter.regionId,n)||(i.objFilter.regionId=n),p(n)}),w("change",function(n){return g(s),p(i.onRegionChange(n))}),e(7,"option",6),o(8,"All"),t(),v(9,K,2,2,"option",7),t()(),e(10,"div",4)(11,"label"),o(12,"Country"),t(),e(13,"select",8),b("ngModelChange",function(n){return g(s),h(i.objFilter.countryId,n)||(i.objFilter.countryId=n),p(n)}),e(14,"option",6),o(15,"All"),t(),v(16,Q,2,2,"option",7),t()(),e(17,"div",4)(18,"label"),o(19,"Membership Status"),t(),e(20,"select",9),b("ngModelChange",function(n){return g(s),h(i.objFilter.membershipStatus,n)||(i.objFilter.membershipStatus=n),p(n)}),e(21,"option",10),o(22,"All"),t(),e(23,"option",11),o(24,"Pending"),t(),e(25,"option",12),o(26,"Completed"),t()()(),e(27,"div",4)(28,"label"),o(29,"Membership Type"),t(),e(30,"select",13),b("ngModelChange",function(n){return g(s),h(i.objFilter.membershipType,n)||(i.objFilter.membershipType=n),p(n)}),e(31,"option",10),o(32,"All"),t(),e(33,"option",14),o(34,"BlockRadiance"),t(),e(35,"option",15),o(36,"Event"),t(),e(37,"option",16),o(38,"HealthVaultRadar"),t(),e(39,"option",17),o(40,"Volunteer"),t(),e(41,"option",18),o(42,"Recycling Agent"),t(),e(43,"option",19),o(44,"PlanetSustain"),t()()(),e(45,"div",4)(46,"label"),o(47,"Gender"),t(),e(48,"select",20),b("ngModelChange",function(n){return g(s),h(i.objFilter.gender,n)||(i.objFilter.gender=n),p(n)}),e(49,"option",10),o(50,"All"),t(),v(51,X,2,2,"option",7),t()(),e(52,"div",4)(53,"label"),o(54,"Age Group"),t(),e(55,"select",21),b("ngModelChange",function(n){return g(s),h(i.objFilter.ageGroupId,n)||(i.objFilter.ageGroupId=n),p(n)}),e(56,"option",6),o(57,"All"),t(),v(58,Z,2,2,"option",7),t()(),e(59,"div",22)(60,"label"),o(61,"Date Range"),t(),e(62,"div",23)(63,"input",24),b("ngModelChange",function(n){return g(s),h(i.objFilter.fromDate,n)||(i.objFilter.fromDate=n),p(n)}),t(),e(64,"span",25),o(65,"to"),t(),e(66,"input",26),b("ngModelChange",function(n){return g(s),h(i.objFilter.toDate,n)||(i.objFilter.toDate=n),p(n)}),t()()(),e(67,"div",27)(68,"button",28),o(69,"Search"),t()(),M(70,"div",29),t()(),v(71,ee,2,1,"div",30)(72,te,2,0,"ng-template",null,0,E),t()}if(r&2){let s=F(73);l(6),u("ngModel",i.objFilter.regionId),l(),m("value",0),l(2),m("ngForOf",i.regionList),l(4),u("ngModel",i.objFilter.countryId),l(),m("value",0),l(2),m("ngForOf",i.countryList),l(4),u("ngModel",i.objFilter.membershipStatus),l(10),u("ngModel",i.objFilter.membershipType),l(18),u("ngModel",i.objFilter.gender),l(3),m("ngForOf",i.genderList),l(4),u("ngModel",i.objFilter.ageGroupId),l(),m("value",0),l(2),m("ngForOf",i.ageGroupList),l(5),u("ngModel",i.objFilter.fromDate),l(3),u("ngModel",i.objFilter.toDate),l(5),m("ngIf",i.dashboardItems.length>0)("ngIfElse",s)}},dependencies:[L,V,x,z,N,B,k,R,U,W,O,G,A],styles:[".dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:1rem;margin-top:1.5rem}.dashboard-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:1.2rem 1rem;border-radius:12px;text-align:center;box-shadow:0 4px 12px #0000001a;transition:transform .25s ease,box-shadow .25s ease}.dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 6px 16px #00000026}.card-title[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:600;margin-bottom:.25rem}.card-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700}.no-data-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;font-style:italic;font-size:1.1rem}.header-center[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);z-index:1;text-align:center}"]})};var fe=[{path:"",canActivateChild:[P],children:[{path:"",component:y}]}];export{fe as DASHBOARD_ROUTES};
